{
  "version": 3,
  "sources": ["model.ts"],
  "sourcesContent": ["import { Resource } from '../../core';\nimport { Construct } from 'constructs';\nimport { CfnModel, CfnModelProps } from './apigateway.generated';\nimport * as jsonSchema from './json-schema';\nimport { IRestApi, RestApi } from './restapi';\nimport * as util from './util';\n\nexport interface IModel {\n                                                                               \n  readonly modelId: string;\n}\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \nexport class EmptyModel implements IModel {\n  public readonly modelId = 'Empty';\n}\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \nexport class ErrorModel implements IModel {\n  public readonly modelId = 'Error';\n}\n\nexport interface ModelOptions {\n                                                                                                                                                                       \n  readonly contentType?: string;\n\n                                                                             \n  readonly description?: string;\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \n  readonly modelName?: string;\n\n                                                                                                                                                 \n  readonly schema: jsonSchema.JsonSchema;\n}\n\nexport interface ModelProps extends ModelOptions {\n                                                                                                                                                                                                                                                                                                                                                                                                       \n  readonly restApi: IRestApi;\n}\n\nexport class Model extends Resource implements IModel {\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \n  public static readonly ERROR_MODEL: IModel = new ErrorModel();\n\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \n  public static readonly EMPTY_MODEL: IModel = new EmptyModel();\n\n  public static fromModelName(scope: Construct, id: string, modelName: string): IModel {\n    class Import extends Resource implements IModel {\n      public readonly modelId = modelName;\n    }\n\n    return new Import(scope, id);\n  }\n\n                                                                               \n  public readonly modelId: string;\n\n  constructor(scope: Construct, id: string, props: ModelProps) {\n    super(scope, id, {\n      physicalName: props.modelName,\n    });\n\n    const modelProps: CfnModelProps = {\n      name: this.physicalName,\n      restApiId: props.restApi.restApiId,\n      contentType: props.contentType ?? 'application/json',\n      description: props.description,\n      schema: util.JsonSchemaMapper.toCfnJsonSchema(props.schema),\n    };\n\n    const resource = new CfnModel(this, 'Resource', modelProps);\n\n    this.modelId = this.getResourceNameAttribute(resource.ref);\n\n    const deployment = (props.restApi instanceof RestApi) ? props.restApi.latestDeployment : undefined;\n    if (deployment) {\n      deployment.node.addDependency(resource);\n      deployment.addToLogicalId({ model: modelProps });\n    }\n  }\n}\n"],
  "mappings": "wPAAA,OAAA,QAAA,cAEA,uBAAA,QAAA,0BAEA,UAAA,QAAA,aACA,KAAA,QAAA,UAQA,gBAAuB,CAAvB,aAAA,CACkB,KAAA,QAAU,SAD5B,QAAA,WAAA,8GAKA,gBAAuB,CAAvB,aAAA,CACkB,KAAA,QAAU,SAD5B,QAAA,WAAA,8GAuBA,mBAA2B,QAAA,QAAQ,CAkBjC,YAAY,MAAkB,GAAY,MAAiB,QACzD,MAAM,MAAO,GAAI,CACf,aAAc,MAAM,iFAGtB,KAAM,YAA4B,CAChC,KAAM,KAAK,aACX,UAAW,MAAM,QAAQ,UACzB,YAAW,IAAE,MAAM,eAAW,MAAA,KAAA,OAAA,GAAI,mBAClC,YAAa,MAAM,YACnB,OAAQ,KAAK,iBAAiB,gBAAgB,MAAM,SAGhD,SAAW,GAAI,wBAAA,SAAS,KAAM,WAAY,YAEhD,KAAK,QAAU,KAAK,yBAAyB,SAAS,KAEtD,KAAM,YAAc,MAAM,kBAAmB,WAAA,QAAW,MAAM,QAAQ,iBAAmB,OACzF,AAAI,YACF,YAAW,KAAK,cAAc,UAC9B,WAAW,eAAe,CAAE,MAAO,oBA/BzB,eAAc,MAAkB,GAAY,UAAiB,CACzE,oBAAqB,QAAA,QAAQ,CAA7B,aAAA,qBACkB,KAAA,QAAU,WAG5B,MAAO,IAAI,QAAO,MAAO,KAZ7B,QAAA,MAAA,+FAEyB,MAAA,YAAsB,GAAI,YAG1B,MAAA,YAAsB,GAAI",
  "names": []
}
